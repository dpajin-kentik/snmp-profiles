# Profile intents to collect metadata and metrics about device components from SNMP ENTITY-MIB and ENTITY-SENSOR-MIB
# Trying to normalize metrics to openconfig-platform:/components model as much as possible



metrics:

  - MIB: /
    table:
      OID: .1.3.6.1.2.1.47.1.1.1    # ENTITY-MIB::entPhysicalTable
      name: components # /components
      # oc-path: /components/component/state

    symbols:

        # here just to have one metric
      - name: components:fru
        OID: .1.3.6.1.2.1.47.1.1.1.1.16

      - tag: sensor/value
        OID: .1.3.6.1.2.1.99.1.1.1.4
        name: entPhySensorValue

      - tag: sensor/status
        OID: .1.3.6.1.2.1.99.1.1.1.5
        name: entPhySensorOperStatus
        enum:
          ok: 1
          unavailable: 2
          nonoperational: 3

    metric_tags:
      - tag: components:description
        column:
          OID: .1.3.6.1.2.1.47.1.1.1.1.2
          name: entPhysicalDescr

      #- tag: components:vendor_type
      #  column:
      #    OID: .1.3.6.1.2.1.47.1.1.1.1.3
      #    name: entPhysicalVendorType
          
      - tag: components:parent
        column:
          OID: .1.3.6.1.2.1.47.1.1.1.1.4
          name: entPhysicalContainedIn
          
      - tag: components:type
        column:
          OID: .1.3.6.1.2.1.47.1.1.1.1.5
          name: entPhysicalClass
          enum:
            other: 1
            unknown: 2
            chassis: 3
            backplane: 4
            container: 5
            powerSupply: 6
            fan: 7
            sensor: 8
            module: 9
            port: 10
            stack: 11
            cpu: 12

      - tag: components:parent-position    # not in openconfig
        column:
          OID: .1.3.6.1.2.1.47.1.1.1.1.6
          name: entPhysicalParentRelPos
          
      - tag: components:name
        column:
          OID: .1.3.6.1.2.1.47.1.1.1.1.7
          name: entPhysicalName
          
      - tag: components:hardware-version
        column:
          OID: .1.3.6.1.2.1.47.1.1.1.1.8
          name: entPhysicalHardwareRev
          
      - tag: components:firmware-version
        column:
          OID: .1.3.6.1.2.1.47.1.1.1.1.9
          name: entPhysicalFirmwareRev
          
      - tag: components:software-version
        column:
          OID: .1.3.6.1.2.1.47.1.1.1.1.10
          name: entPhysicalSoftwareRev
          
      - tag: components:serial-no
        column:
          OID: .1.3.6.1.2.1.47.1.1.1.1.11
          name: entPhysicalSerialNum
        
      - tag: components:mfg-name
        column:
          OID: .1.3.6.1.2.1.47.1.1.1.1.12
          name: entPhysicalMfgName
          
      - tag: components:model
        column:
          OID: .1.3.6.1.2.1.47.1.1.1.1.13
          name: entPhysicalModelName

      - tag: components:removable
        column:
          OID: .1.3.6.1.2.1.47.1.1.1.1.16
          name: entPhysicalIsFru
          enum:
            "true": 1
            "false": 2

      # Sensors
      - tag: sensor/type
        column:
          OID: .1.3.6.1.2.1.99.1.1.1.1
          name: entPhySensorType
          enum:
            other: 1
            unknown: 2
            voltsAC: 3
            voltsDC: 4
            amperes: 5
            watts: 6
            hertz: 7
            celsius: 8
            percentRH: 9
            rpm: 10
            cmm: 11
            truthvalue: 12
        
      - tag: sensor/scale
        column:
          OID: .1.3.6.1.2.1.99.1.1.1.2
          name: entPhySensorScale
          enum:
            yocto: 1
            zepto: 2
            atto: 3
            femto: 4
            pico: 5
            nano: 6
            micro: 7
            milli: 8
            units: 9
            kilo: 10
            mega: 11
            giga: 12
            tera: 13
            exa: 14
            peta: 15
            zetta: 16
            yotta: 17
        
      - tag: sensor/precision
        column:
          OID: .1.3.6.1.2.1.99.1.1.1.3
          name: entPhySensorPrecision
        
      - tag: sensor/units
        column:
          OID: .1.3.6.1.2.1.99.1.1.1.6
          name: entPhySensorUnitsDisplay

      # not used        
      # - tag: components:alias
      #   column:
      #     OID: .1.3.6.1.2.1.47.1.1.1.1.14
      #     name: entPhysicalAlias
          
      # - tag: components:asset_id
      #   column:
      #     OID: .1.3.6.1.2.1.47.1.1.1.1.15
      #     name: entPhysicalAssetID
          

