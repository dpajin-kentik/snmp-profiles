# oc-components_jnxContentsTable.yml
# SNMP: 
#   - JUNIPER-MIB::jnxContentsTable
#   - JUNIPER-MIB::jnxOperatingTable
#   - JUNIPER-MIB::jnxFruTable
# OC: /components/component/state
# Kentik-path: /components

# Profile intents to collect metadata and metrics about device components from JUNIPER-MIB and jnxContentsTable
# Trying to normalize metrics to openconfig-platform:/components model as much as possible

metrics:

  - MIB: /
    table:
      OID: .1.3.6.1.4.1.2636.3.1.8    # JUNIPER-MIB::jnxContentsTable
      name: components # /components
      # oc-path: /components/component/state

    symbols:

        # here just to have one metric - not in OC
      - tag: components:uptime     # this is in TimeTicks - The time interval in 10-millisecond period that this subject has been up and running since the last power on time
        OID: .1.3.6.1.4.1.2636.3.1.13.1.13  
        name: jnxOperatingUpTime

      # # This info comes from ENTITY-STATE-MIB which might not be supported 
      # - tag: components:admin-status
      #   OID: .1.3.6.1.2.1.131.1.1.1.2
      #   name: entStateAdmin    # ENTITY-STATE-MIB::entStateTable
      #   enum:
      #     unknown: 1
      #     locked: 2
      #     shuttingDown: 3
      #     unlocked: 4

      # This enum values here are not compatible with ENTITY-STATE-MIB - have to be translated somehow
      - tag: components:oper-status
        OID: .1.3.6.1.4.1.2636.3.1.13.1.6
        name: jnxOperatingState 
        enum:                      
          # ENTTITY-STATE-MIB values: unknown: 1, disabled: 2, enabled: 3, testing: 4
          # These values are different from ENTITY-STATE
          unknown: 1
          running: 2
          ready: 3
          reset: 4
          runningAtFullSpeed: 5
          down: 6
          standby: 7 


    metric_tags:
      - tag: components:name
        column:
          OID: .1.3.6.1.4.1.2636.3.1.8.1.6
          name: jnxContentsDescr

      # Adding oper-status as a tag, as it can help with the 
      - tag: components:oper-status
        column: 
          OID: .1.3.6.1.4.1.2636.3.1.13.1.6
          name: jnxOperatingState 
          enum:                      # ENTTITY-STATE-MIB values: unknown: 1, disabled: 2, enabled: 3, testing: 4
            # These values are different from ENTITY-STATE
            unknown: 1
            running: 2
            ready: 3
            reset: 4
            runningAtFullSpeed: 5
            down: 6
            standby: 7 

      # entPhysicalVendorType is the OID reference to the Vendor MIBs
      # to many moving components to track for now
      #- tag: components:vendor_type
      #  column:
      #    OID: .1.3.6.1.2.1.47.1.1.1.1.3
      #    name: entPhysicalVendorType
      
      # jnxContentsTable does not 
      # - tag: components:parent
      #   column:
      #     OID: .1.3.6.1.2.1.47.1.1.1.1.4
      #     name: entPhysicalContainedIn
          
      - tag: components:type
        column:
          OID: .1.3.6.1.4.1.2636.3.1.15.1.6
          name: jnxFruType
          enum:
            other: 1
            clockGenerator: 2
            flexiblePicConcentrator: 3
            switchingAndForwardingModule: 4
            controlBoard: 5
            routingEngine: 6
            powerEntryModule: 7
            frontPanelModule: 8
            switchInterfaceBoard: 9
            processorMezzanineBoardForSIB: 10
            portInterfaceCard: 11
            craftInterfacePanel: 12
            fan: 13
            lineCardChassis: 14
            forwardingEngineBoard: 15
            protectedSystemDomain: 16
            powerDistributionUnit: 17
            powerSupplyModule: 18
            switchFabricBoard: 19
            adapterCard: 20
            ftc: 21

      # NOT USED 
      # - tag: components:parent-position    # not in openconfig
      #   column:
      #     OID: .1.3.6.1.2.1.47.1.1.1.1.6
      #     name: entPhysicalParentRelPos
          
      - tag: components:description
        column:
          OID: .1.3.6.1.4.1.2636.3.1.8.1.14
          name: jnxContentsModel
          
      - tag: components:hardware-version
        column:
          OID: .1.3.6.1.4.1.2636.3.1.8.1.8
          name: jnxContentsRevision
          
      # NOT USED 
      # - tag: components:firmware-version
      #   column:
      #     OID: .1.3.6.1.2.1.47.1.1.1.1.9
      #     name: entPhysicalFirmwareRev
          
      # NOT USED 
      # - tag: components:software-version
      #   column:
      #     OID: .1.3.6.1.2.1.47.1.1.1.1.10
      #     name: entPhysicalSoftwareRev
          
      - tag: components:serial-no
        column:
          OID: .1.3.6.1.4.1.2636.3.1.8.1.7
          name: jnxContentsSerialNo

      # NOT USED   
      # - tag: components:mfg-name
      #   column:
      #     OID: .1.3.6.1.2.1.47.1.1.1.1.12
      #     name: entPhysicalMfgName
          
      - tag: components:model
        column:
          OID: .1.3.6.1.4.1.2636.3.1.8.1.10
          name: jnxContentsPartNo

      # NOT USED 
      # - tag: components:removable
      #   column:
      #     OID: .1.3.6.1.2.1.47.1.1.1.1.16
      #     name: entPhysicalIsFru
      #     enum:
      #       "true": 1
      #       "false": 2

      # not used        
      # - tag: components:alias
      #   column:
      #     OID: .1.3.6.1.2.1.47.1.1.1.1.14
      #     name: entPhysicalAlias
          
      # - tag: components:asset_id
      #   column:
      #     OID: .1.3.6.1.2.1.47.1.1.1.1.15
      #     name: entPhysicalAssetID
          

