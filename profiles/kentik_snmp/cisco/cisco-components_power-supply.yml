# Example output:
# $ grep -R components, influx | grep Container | grep power
# components,components:description=Container\ of\ Container\ of\ Power\ Supply,components:name=Container\ of\ Container\ of\ Power\ Supply,components:parent=1,components:parent-position=5,components:removable=false,components:type=container,device_ip=198.186.190.9,device_name=cat6509,index=9,power-supply/redundancy-mode=nonRedundant,power-supply/units=centiAmpsAt42v,tags.dc=iad1,tags.kentik.model=Catalyst\ WSC6503,tags.kentik.vendor=Cisco,tags.type=spine components:fru=2i,power-supply/output-current=2189i,power-supply/input-current=1701i 1669028044

# This profile will add metrics and metadata on top of already existing
# which are defined in the components.yml into the same measruement "/components"
# for those components which return values from additonal table with the same index


---
extends:
  - components.yml


metrics:

  - MIB: /
    table:
      OID: 1.3.6.1.4.1.9.9.117.1.1.1    # CISCO-ENTITY-FRU-CONTROL-MIB::cefcFRUPowerSupplyGroupTable
      name: components

    symbols:

      - tag: power-supply/output-current
        OID: 1.3.6.1.4.1.9.9.117.1.1.1.1.3
        name: cefcTotalAvailableCurrent

      - tag: power-supply/input-current
        OID: 1.3.6.1.4.1.9.9.117.1.1.1.1.4
        name: cefcTotalDrawnCurrent

      # - tag: power-supply/redundancy-mode
      #   OID: 1.3.6.1.4.1.9.9.117.1.1.1.1.5
      #   name: cefcPowerRedundancyOperMode
      #   enum:
      #     notsupported: 1
      #     redundant: 2
      #     combined: 3
      #     nonRedundant: 4
      #     psRedundant: 5
      #     inPwrSrcRedundant: 6
      #     psRedundantSingleInput: 7

    metric_tags:

      # - tag: components:name
      #   column:
      #     OID: 1.3.6.1.2.1.47.1.1.1.1.7
      #     name: entPhysicalName

      # - tag: components:description
      #   column:
      #     OID: 1.3.6.1.2.1.47.1.1.1.1.2
      #     name: entPhysicalDescr

      - tag: power-supply/units
        column:
          OID: 1.3.6.1.4.1.9.9.117.1.1.1.1.2
          name: cefcPowerUnits

      - tag: power-supply/redundancy-mode
        column:
          OID: 1.3.6.1.4.1.9.9.117.1.1.1.1.5
          name: cefcPowerRedundancyOperMode
          enum:
            notsupported: 1
            redundant: 2
            combined: 3
            nonRedundant: 4
            psRedundant: 5
            inPwrSrcRedundant: 6
            psRedundantSingleInput: 7
