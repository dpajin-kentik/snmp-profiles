# https://mibs.observium.org/mib/CISCO-PROCESS-MIB/
# https://mibs.observium.org/mib/CISCO-MEMORY-POOL-MIB/
# https://mibs.observium.org/mib/CISCO-IF-EXTENSION-MIB/
# https://mibs.observium.org/mib/CISCO-STACKWISE-MIB/
# https://mibs.observium.org/mib/CISCO-VIRTUAL-SWITCH-MIB/
# https://mibs.observium.org/mib/ENTITY-MIB/
# https://mibs.observium.org/mib/CISCO-ENTITY-FRU-CONTROL-MIB/
# https://mibs.observium.org/mib/CISCO-ENTITY-SENSOR-MIB/
# https://mibs.observium.org/mib/CISCO-ENVMON-MIB/
# https://mibs.observium.org/mib/CISCO-RTTMON-MIB/
---
extends:
  - components.yml


metrics:

  - MIB: /
    table:
      OID: 1.3.6.1.4.1.9.9.117.1.1.2    # ENTITY-MIB::entPhysicalTable
      name: components # /components
      # oc-path: /components/component/state

    symbols:

      - tag: power-supply/output-current
        OID: 1.3.6.1.4.1.9.9.117.1.1.1.1.3
        name: cefcTotalAvailableCurrent


    metric_tags:

      - tag: components:name
        column:
          OID: 1.3.6.1.2.1.47.1.1.1.1.7
          name: entPhysicalName

      - tag: components:description
        column:
          OID: 1.3.6.1.2.1.47.1.1.1.1.2
          name: entPhysicalDescr

      - tag: power-supply/units
        column:
          OID: 1.3.6.1.4.1.9.9.117.1.1.1.1.2
          name: cefcPowerUnits

      - tag: power-supply/redundancy-mode
          OID: 1.3.6.1.4.1.9.9.117.1.1.1.1.5
          name: cefcPowerRedundancyOperMode
          enum:
            notsupported: 1
            redundant: 2
            combined: 3
            nonRedundant: 4
            psRedundant: 5
            inPwrSrcRedundant: 6
            psRedundantSingleInput: 7




  # This table contains the operational status information for all ENTITY-MIB entPhysicalTable entries which have an entPhysicalClass of 'fan'.
  - MIB: CISCO-ENTITY-FRU-CONTROL-MIB
    table:
      name: cefcFanTrayStatusTable
      OID: 1.3.6.1.4.1.9.9.117.1.4.1
    symbols:
      # The operational state of the fan or fan tray.
      - name: cefcFanTrayOperStatus
        OID: 1.3.6.1.4.1.9.9.117.1.4.1.1.1
        enum:
          unknown: 1
          up: 2
          down: 3
          warning: 4
    metric_tags:
      # A textual description of physical entity.
      - tag: entity_description
        column:
          name: entPhysicalDescr
          OID: 1.3.6.1.2.1.47.1.1.1.1.2
      # An indication of the general hardware type of the physical entity.
      - tag: entity_class
        column:
          name: entPhysicalClass
          OID: 1.3.6.1.2.1.47.1.1.1.1.5
          enum:
            other: 1
            unknown: 2
            chassis: 3
            backplane: 4
            container: 5
            powerSupply: 6
            fan: 7
            sensor: 8
            module: 9
            port: 10
            stack: 11
            cpu: 12
      # The textual name of the physical entity.
      - tag: entity_name
        column:
          name: entPhysicalName
          OID: 1.3.6.1.2.1.47.1.1.1.1.7
      # The vendor-specific serial number string for the physical entity.
      - tag: entity_serial
        column:
          name: entPhysicalSerialNum
          OID: 1.3.6.1.2.1.47.1.1.1.1.11
      # The vendor-specific model name identifier string associated with this physical component.
      - tag: entity_model
        column:
          name: entPhysicalModelName
          OID: 1.3.6.1.2.1.47.1.1.1.1.13

  # This table contains a list of fan information for all ENTITY-MIB entPhysicalTable entries which have an entPhysicalClass of 'fan'.
  - MIB: CISCO-ENTITY-FRU-CONTROL-MIB
    table:
      name: cefcFanTable
      OID: 1.3.6.1.4.1.9.9.117.1.4.2
    symbols:
      # The speed of the fan
      - name: cefcFanSpeed
        OID: 1.3.6.1.4.1.9.9.117.1.4.2.1.1
      # The percent of speed relative to the maximum speed of the fan.
      - name: cefcFanSpeedPercent
        OID: 1.3.6.1.4.1.9.9.117.1.4.2.1.2
    metric_tags:
      # A textual description of physical entity.
      - tag: entity_description
        column:
          name: entPhysicalDescr
          OID: 1.3.6.1.2.1.47.1.1.1.1.2
      # An indication of the general hardware type of the physical entity.
      - tag: entity_class
        column:
          name: entPhysicalClass
          OID: 1.3.6.1.2.1.47.1.1.1.1.5
          enum:
            other: 1
            unknown: 2
            chassis: 3
            backplane: 4
            container: 5
            powerSupply: 6
            fan: 7
            sensor: 8
            module: 9
            port: 10
            stack: 11
            cpu: 12
      # The textual name of the physical entity.
      - tag: entity_name
        column:
          name: entPhysicalName
          OID: 1.3.6.1.2.1.47.1.1.1.1.7
      # The vendor-specific serial number string for the physical entity.
      - tag: entity_serial
        column:
          name: entPhysicalSerialNum
          OID: 1.3.6.1.2.1.47.1.1.1.1.11
      # The vendor-specific model name identifier string associated with this physical component.
      - tag: entity_model
        column:
          name: entPhysicalModelName
          OID: 1.3.6.1.2.1.47.1.1.1.1.13


  # The table of voltage status maintained by the environmental monitor.
  - MIB: CISCO-ENVMON-MIB
    table:
      name: ciscoEnvMonVoltageStatusTable
      OID: 1.3.6.1.4.1.9.9.13.1.2
    symbols:
      # The current measurement of the testpoint being instrumented.
      - name: ciscoEnvMonVoltageStatusValue
        OID: 1.3.6.1.4.1.9.9.13.1.2.1.3
        tag: voltage_value
      # The current state of the testpoint being instrumented.
      - name: ciscoEnvMonVoltageState
        OID: 1.3.6.1.4.1.9.9.13.1.2.1.7
        enum:
          normal: 1
          warning: 2
          critical: 3
          shutdown: 4
          notPresent: 5
          notFunctioning: 6
        tag: voltage_state
    metric_tags:
      # Textual description of the testpoint being instrumented.
      - tag: voltage_descr
        column:
          name: ciscoEnvMonVoltageStatusDescr
          OID: 1.3.6.1.4.1.9.9.13.1.2.1.2
      # A textual description of physical entity.
      - tag: entity_description
        column:
          name: entPhysicalDescr
          OID: 1.3.6.1.2.1.47.1.1.1.1.2
      # An indication of the general hardware type of the physical entity.
      - tag: entity_class
        column:
          name: entPhysicalClass
          OID: 1.3.6.1.2.1.47.1.1.1.1.5
          enum:
            other: 1
            unknown: 2
            chassis: 3
            backplane: 4
            container: 5
            powerSupply: 6
            fan: 7
            sensor: 8
            module: 9
            port: 10
            stack: 11
            cpu: 12
      # The textual name of the physical entity.
      - tag: entity_name
        column:
          name: entPhysicalName
          OID: 1.3.6.1.2.1.47.1.1.1.1.7
      # The vendor-specific serial number string for the physical entity.
      - tag: entity_serial
        column:
          name: entPhysicalSerialNum
          OID: 1.3.6.1.2.1.47.1.1.1.1.11
      # The vendor-specific model name identifier string associated with this physical component.
      - tag: entity_model
        column:
          name: entPhysicalModelName
          OID: 1.3.6.1.2.1.47.1.1.1.1.13

  # The table of ambient temperature status maintained by the environmental monitor.
  - MIB: CISCO-ENVMON-MIB
    table:
      name: ciscoEnvMonTemperatureStatusTable
      OID: 1.3.6.1.4.1.9.9.13.1.3
    symbols:
      # The current measurement of the testpoint being instrumented.
      - name: ciscoEnvMonTemperatureStatusValue
        OID: 1.3.6.1.4.1.9.9.13.1.3.1.3
        tag: temp_value
      # The current state of the testpoint being instrumented.
      - name: ciscoEnvMonTemperatureState
        OID: 1.3.6.1.4.1.9.9.13.1.3.1.6
        enum:
          normal: 1
          warning: 2
          critical: 3
          shutdown: 4
          notPresent: 5
          notFunctioning: 6
        tag: temp_state
    metric_tags:
      # Textual description of the testpoint being instrumented.
      - tag: temp_descr
        column:
          name: ciscoEnvMonTemperatureStatusDescr
          OID: 1.3.6.1.4.1.9.9.13.1.3.1.2
      # The highest value that the associated instance of the object ciscoEnvMonTemperatureStatusValue may obtain before an emergency shutdown of the managed device is initiated.
      - tag: temp_threshold
        column:
          name: ciscoEnvMonTemperatureThreshold
          OID: 1.3.6.1.4.1.9.9.13.1.3.1.4
      # A textual description of physical entity.
      - tag: entity_description
        column:
          name: entPhysicalDescr
          OID: 1.3.6.1.2.1.47.1.1.1.1.2
      # An indication of the general hardware type of the physical entity.
      - tag: entity_class
        column:
          name: entPhysicalClass
          OID: 1.3.6.1.2.1.47.1.1.1.1.5
          enum:
            other: 1
            unknown: 2
            chassis: 3
            backplane: 4
            container: 5
            powerSupply: 6
            fan: 7
            sensor: 8
            module: 9
            port: 10
            stack: 11
            cpu: 12
      # The textual name of the physical entity.
      - tag: entity_name
        column:
          name: entPhysicalName
          OID: 1.3.6.1.2.1.47.1.1.1.1.7
      # The vendor-specific serial number string for the physical entity.
      - tag: entity_serial
        column:
          name: entPhysicalSerialNum
          OID: 1.3.6.1.2.1.47.1.1.1.1.11
      # The vendor-specific model name identifier string associated with this physical component.
      - tag: entity_model
        column:
          name: entPhysicalModelName
          OID: 1.3.6.1.2.1.47.1.1.1.1.13

  # The table of fan status maintained by the environmental monitor.
  - MIB: CISCO-ENVMON-MIB
    table:
      name: ciscoEnvMonFanStatusTable
      OID: 1.3.6.1.4.1.9.9.13.1.4
    symbols:
      # The current state of the fan being instrumented.
      - name: ciscoEnvMonFanState
        OID: 1.3.6.1.4.1.9.9.13.1.4.1.3
        enum:
          normal: 1
          warning: 2
          critical: 3
          shutdown: 4
          notPresent: 5
          notFunctioning: 6
        tag: fan_state
    metric_tags:
      # Textual description of the fan being instrumented.
      - tag: fan_descr
        column:
          name: ciscoEnvMonFanStatusDescr
          OID: 1.3.6.1.4.1.9.9.13.1.4.1.2
      # A textual description of physical entity.
      - tag: entity_description
        column:
          name: entPhysicalDescr
          OID: 1.3.6.1.2.1.47.1.1.1.1.2
      # An indication of the general hardware type of the physical entity.
      - tag: entity_class
        column:
          name: entPhysicalClass
          OID: 1.3.6.1.2.1.47.1.1.1.1.5
          enum:
            other: 1
            unknown: 2
            chassis: 3
            backplane: 4
            container: 5
            powerSupply: 6
            fan: 7
            sensor: 8
            module: 9
            port: 10
            stack: 11
            cpu: 12
      # The textual name of the physical entity.
      - tag: entity_name
        column:
          name: entPhysicalName
          OID: 1.3.6.1.2.1.47.1.1.1.1.7
      # The vendor-specific serial number string for the physical entity.
      - tag: entity_serial
        column:
          name: entPhysicalSerialNum
          OID: 1.3.6.1.2.1.47.1.1.1.1.11
      # The vendor-specific model name identifier string associated with this physical component.
      - tag: entity_model
        column:
          name: entPhysicalModelName
          OID: 1.3.6.1.2.1.47.1.1.1.1.13

  # The table of power supply status maintained by the environmental monitor card.
  - MIB: CISCO-ENVMON-MIB
    table:
      name: ciscoEnvMonSupplyStatusTable
      OID: 1.3.6.1.4.1.9.9.13.1.5
    symbols:
      # The current state of the power supply being instrumented.
      - name: ciscoEnvMonSupplyState
        OID: 1.3.6.1.4.1.9.9.13.1.5.1.3
        enum:
          normal: 1
          warning: 2
          critical: 3
          shutdown: 4
          notPresent: 5
          notFunctioning: 6
        tag: power_supply_state
    metric_tags:
      # Textual description of the power supply being instrumented.
      - tag: power_status_description
        column:
          name: ciscoEnvMonSupplyStatusDescr
          OID: 1.3.6.1.4.1.9.9.13.1.5.1.2
      # The power supply source.
      - tag: power_source
        column:
          name: ciscoEnvMonSupplySource
          OID: 1.3.6.1.4.1.9.9.13.1.5.1.4
          enum:
            unknown: 1
            ac: 2
            dc: 3
            externalPowerSupply: 4
            internalRedundant: 5
      # A textual description of physical entity.
      - tag: entity_description
        column:
          name: entPhysicalDescr
          OID: 1.3.6.1.2.1.47.1.1.1.1.2
      # An indication of the general hardware type of the physical entity.
      - tag: entity_class
        column:
          name: entPhysicalClass
          OID: 1.3.6.1.2.1.47.1.1.1.1.5
          enum:
            other: 1
            unknown: 2
            chassis: 3
            backplane: 4
            container: 5
            powerSupply: 6
            fan: 7
            sensor: 8
            module: 9
            port: 10
            stack: 11
            cpu: 12
      # The textual name of the physical entity.
      - tag: entity_name
        column:
          name: entPhysicalName
          OID: 1.3.6.1.2.1.47.1.1.1.1.7
      # The vendor-specific serial number string for the physical entity.
      - tag: entity_serial
        column:
          name: entPhysicalSerialNum
          OID: 1.3.6.1.2.1.47.1.1.1.1.11
      # The vendor-specific model name identifier string associated with this physical component.
      - tag: entity_model
        column:
          name: entPhysicalModelName
          OID: 1.3.6.1.2.1.47.1.1.1.1.13
