# https://mibs.observium.org/mib/CISCO-PROCESS-MIB/
# https://mibs.observium.org/mib/CISCO-MEMORY-POOL-MIB/
# https://mibs.observium.org/mib/CISCO-IF-EXTENSION-MIB/
# https://mibs.observium.org/mib/CISCO-STACKWISE-MIB/
# https://mibs.observium.org/mib/CISCO-VIRTUAL-SWITCH-MIB/
# https://mibs.observium.org/mib/ENTITY-MIB/
# https://mibs.observium.org/mib/CISCO-ENTITY-FRU-CONTROL-MIB/
# https://mibs.observium.org/mib/CISCO-ENTITY-SENSOR-MIB/
# https://mibs.observium.org/mib/CISCO-ENVMON-MIB/
# https://mibs.observium.org/mib/CISCO-RTTMON-MIB/
---
extends:
  # Generic MIB2 profiles
  - if-mib.yml
  #- system-mib.yml
  # Normalized to Kentik/OC data models
  - oc-lldp.yml
  - oc-ospf.yml
  - oc-address-ipv4_ipAddrTable.yml
  - oc-address-ipv6_ipv6AddrTable.yml
  - oc-components_entPhysicalTable.yml
  - oc-components-sensor_entPhySensorTable.yml
  - oc-components-power-supply_cefcFRUPowerSupplyGroupTable.yml
  # Cisco specific stuff


  # - MIB: device_normalized
  #   symbol:
  #     OID: 1.3.6.1.4.1.9.9.48.1.1.1.5.1
  #     name: memory_util
  #     tag: MemoryUsed
  #     allow_duplicate: true
  # - MIB: device_normalized
  #   symbol:
  #     OID: 1.3.6.1.4.1.9.9.48.1.1.1.6.1
  #     name: memory_util
  #     tag: MemoryFree
  #     allow_duplicate: true

metrics:

  # A table of overall CPU statistics.
  # Polled at 60s to support anomaly detection.
  - MIB: CISCO-PROCESS-MIB
    table:
      name: cpmCPUTotalTable
      OID: 1.3.6.1.4.1.9.9.109.1.1.1
    symbols:
      # The overall CPU busy percentage in the last 1 minute period.
      - name: cpmCPUTotal1minRev
        OID: 1.3.6.1.4.1.9.9.109.1.1.1.1.7
        poll_time_sec: 60
        tag: CPU
        allow_duplicate: true

  # A table of memory pool monitoring entries.
  # Polled at 60s to support anomaly detection.
  - MIB: CISCO-MEMORY-POOL-MIB
    table:
      name: ciscoMemoryPoolTable
      OID: 1.3.6.1.4.1.9.9.48.1.1
    symbols:
      # Indicates the number of bytes from the memory pool that are currently in use by applications on the managed device.
      - name: ciscoMemoryPoolUsed
        OID: 1.3.6.1.4.1.9.9.48.1.1.1.5
        poll_time_sec: 60
        tag: MemoryUsed
        allow_duplicate: true
      # Indicates the number of bytes from the memory pool that are currently unused on the managed device.
      - name: ciscoMemoryPoolFree
        OID: 1.3.6.1.4.1.9.9.48.1.1.1.6
        poll_time_sec: 60
        tag: MemoryFree
        allow_duplicate: true
    metric_tags:
      # A textual name assigned to the memory pool.
      - tag: memory_pool_name
        column:
          OID: 1.3.6.1.4.1.9.9.48.1.1.1.2
          name: ciscoMemoryPoolName

  # This table contains objects which provide more information about interface properties not available in IF-MIB (RFC 2863).
  # Some objects defined in this table may be applicable to physical interfaces only.
  # As a result, this table may be sparse for logical interfaces.
  - MIB: CISCO-IF-EXTENSION-MIB
    table:
      name: cieIfInterfaceTable
      OID: 1.3.6.1.4.1.9.9.276.1.1.2
    symbols:
      # The number of times the interface was internally reset and brought up.
      - name: cieIfResetCount
        OID: 1.3.6.1.4.1.9.9.276.1.1.2.1.1
    metric_tags:
      # The textual name of the interface.
      - tag: if_interface_name
        column:
          name: ifName
          OID: 1.3.6.1.2.1.31.1.1.1.1



  # This table describes the information of the devices listed in the ENTITY-MIB entPhysicalTable in the virtual switch architecture, whose entPhysicalClass is chassis(3).
  - MIB: CISCO-VIRTUAL-SWITCH-MIB
    table:
      name: cvsChassisTable
      OID: 1.3.6.1.4.1.9.9.388.1.2.2
    symbols:
      # The time (in hundredths of a second) since the chassis device was last re-initialized.
      - name: cvsChassisUpTime
        OID: 1.3.6.1.4.1.9.9.388.1.2.2.1.3
    metric_tags:
      # The unique switch ID which is assigned for identifying a chassis in the virtual switch architecture.
      - tag: chassis_switch_id
        column:
          name: cvsChassisSwitchID
          OID: 1.3.6.1.4.1.9.9.388.1.2.2.1.1
